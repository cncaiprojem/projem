# =================================================================================
# ULTRA-ENTERPRISE DEVELOPMENT ENVIRONMENT CONFIGURATION - Task 3.12
# =================================================================================
# UYARI: Bu dosya Task 3.12 ile güncellenen development environment konfigürasyonu
# Production ortamında kesinlikle farklı ve güvenli değerleri kullanın
# =================================================================================

# ===================================================================
# CORE ENVIRONMENT CONFIGURATION (Task 3.12)
# ===================================================================

# Environment mode - CRITICAL SETTING
ENV=development

# Development mode toggle - ONLY for development environment
DEV_MODE=true

# Debug mode for detailed error traces
DEBUG=true

# Production hardening (disabled in development for ease of use)
PRODUCTION_HARDENING_ENABLED=false

# Security level enforcement
SECURITY_LEVEL=minimal

# ===================================================================
# DEVELOPMENT MODE FEATURES (Task 3.12)
# ===================================================================

# Authentication bypass for development convenience (DANGEROUS - never in production)
DEV_AUTH_BYPASS=true

# Show detailed error messages in development
DEV_DETAILED_ERRORS=true

# Add development annotations to API responses
DEV_RESPONSE_ANNOTATIONS=true

# Mock external services in development
DEV_MOCK_EXTERNAL_SERVICES=true

# CSRF localhost bypass for development convenience
CSRF_DEV_LOCALHOST_BYPASS=true

# ===================================================================
# PRODUCTION HARDENING (Disabled in dev, documented for reference)
# ===================================================================

# Force HTTPS redirects (disabled in dev for HTTP testing)
PROD_FORCE_HTTPS=false

# Mask error details (disabled in dev for debugging)
PROD_MASK_ERROR_DETAILS=false

# Strict cookie security (relaxed in dev for localhost)
PROD_STRICT_COOKIES=false

# Disable debug endpoints (enabled in dev for testing)
PROD_DISABLE_DEBUG_ENDPOINTS=false

# ===================================================================
# APPLICATION CORE SETTINGS
# ===================================================================

# Main application secret (DEV ONLY - change in production)
SECRET_KEY=dev-secret-key-change-in-production-minimum-32-chars

# Server ports
API_PORT=8000
WEB_PORT=3000

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================

POSTGRES_USER=freecad_dev
POSTGRES_PASSWORD=dev_password_changeme
POSTGRES_DB=freecad_dev
POSTGRES_PORT=5432
DATABASE_URL=postgresql+psycopg2://freecad_dev:dev_password_changeme@postgres:5432/freecad_dev

# Database performance settings
DB_CONNECTION_POOL_SIZE=20
DB_CONNECTION_TIMEOUT=30
DB_QUERY_TIMEOUT=60

# ===================================================================
# REDIS & CACHING CONFIGURATION
# ===================================================================

REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_CONNECTION_POOL_SIZE=50
REDIS_CONNECTION_TIMEOUT=5

# ===================================================================
# JWT & AUTHENTICATION CONFIGURATION (Tasks 3.1, 3.2, 3.3)
# ===================================================================

# JWT configuration
JWT_SECRET_KEY=dev-jwt-secret-key-change-in-production-banking-grade
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER=freecad-ultra-enterprise-dev
JWT_AUDIENCE=freecad-banking-users-dev

# Session configuration (Task 3.2, 3.3)
SESSION_TIMEOUT_MINUTES=30
SESSION_ABSOLUTE_TIMEOUT_MINUTES=480
SESSION_COOKIE_NAME=session_id
SESSION_COOKIE_SECURE=false  # Disabled for HTTP in dev
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# Legacy token settings for backward compatibility
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_MINUTES=43200

# ===================================================================
# CSRF PROTECTION CONFIGURATION (Task 3.8)
# ===================================================================

# CSRF secret key (DEV ONLY - change in production)
CSRF_SECRET_KEY=dev-csrf-hmac-key-ultra-secure-banking-grade-change-in-production

# CSRF token settings
CSRF_TOKEN_LIFETIME_SECONDS=7200
CSRF_RATE_LIMIT_PER_MINUTE=60
CSRF_REQUIRE_AUTH=true

# ===================================================================
# CORS CONFIGURATION
# ===================================================================

# CORS settings for development (restrictive even in dev)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOWED_HEADERS=Accept,Accept-Language,Content-Language,Content-Type,Authorization,X-Requested-With,X-CSRF-Token,X-Request-ID
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ===================================================================
# RATE LIMITING CONFIGURATION (Task 3.9)
# ===================================================================

# Rate limiting settings (relaxed in dev)
RATE_LIMIT_GLOBAL=10000/hour
RATE_LIMIT_AUTH=100/minute
RATE_LIMIT_API=3000/hour

# Brute force protection (relaxed in dev)
BRUTE_FORCE_MAX_ATTEMPTS=10
BRUTE_FORCE_LOCKOUT_DURATION=300
BRUTE_FORCE_RESET_TIME=1800

# ===================================================================
# SECURITY HEADERS CONFIGURATION (Task 3.10)
# ===================================================================

# Security headers (relaxed for development)
SECURITY_HSTS_ENABLED=false  # Disabled for HTTP in dev
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_CSP_ENABLED=true
SECURITY_CSP_REPORT_URI=/api/security/csp-report
SECURITY_INPUT_VALIDATION_ENABLED=true
SECURITY_XSS_DETECTION_ENABLED=true

# ===================================================================
# OAUTH2 & GOOGLE OIDC CONFIGURATION (Task 3.5)
# ===================================================================

# Google OAuth (configure with real values for testing)
GOOGLE_OAUTH_ENABLED=true
GOOGLE_CLIENT_ID=your-dev-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=GOCSPX-your-dev-google-client-secret
GOOGLE_DISCOVERY_URL=https://accounts.google.com/.well-known/openid-configuration

# OAuth security settings
OAUTH_STATE_EXPIRE_MINUTES=15
OAUTH_PKCE_VERIFIER_EXPIRE_MINUTES=15
OAUTH_CALLBACK_TIMEOUT_SECONDS=30

# ===================================================================
# TURKISH KVKV COMPLIANCE CONFIGURATION
# ===================================================================

# KVKV settings (enabled even in development for testing)
KVKV_DATA_RETENTION_DAYS=2555
KVKV_PII_MASKING_ENABLED=true
KVKV_AUDIT_LOG_ENABLED=true
KVKV_CONSENT_REQUIRED=true

# ===================================================================
# AUDIT & SECURITY EVENT LOGGING (Task 3.11)
# ===================================================================

# Audit logging (enabled for development testing)
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365  # Shorter in dev
AUDIT_HASH_CHAIN_ENABLED=false  # Disabled in dev for performance
AUDIT_REAL_TIME_MONITORING=true
SECURITY_EVENTS_ENABLED=true

# ===================================================================
# STORAGE & FILE HANDLING
# ===================================================================

# MinIO/S3 configuration for development
AWS_ACCESS_KEY_ID=dev_minioadmin
AWS_SECRET_ACCESS_KEY=dev_minioadmin_password
AWS_S3_ENDPOINT=http://minio:9000
AWS_S3_REGION=us-east-1
S3_BUCKET_NAME=dev-artifacts

# MinIO credentials
MINIO_ROOT_USER=dev_minioadmin
MINIO_ROOT_PASSWORD=dev_minioadmin_password

# ===================================================================
# FREECAD & APPLICATION SPECIFIC
# ===================================================================

# FreeCAD configuration
FREECADCMD_PATH=/usr/bin/FreeCADCmd
FREECAD_TIMEOUT_SECONDS=1200
FREECAD_ASM4_REQUIRED=true

# FreeCAD queue settings
FREECAD_QUEUE_CONCURRENCY=1
TIMEOUT_S=900

# Simulation settings
SIM_RESOLUTION_MM_DEFAULT=0.8
SIM_TIMEOUT_S=1200
SIM_QUEUE_CONCURRENCY=1

# ===================================================================
# RABBITMQ & CELERY CONFIGURATION
# ===================================================================

# RabbitMQ settings
RABBITMQ_USER=freecad
RABBITMQ_PASS=freecad
RABBITMQ_VHOST=/
RABBITMQ_PORT=5672
RABBITMQ_MGMT_PORT=15672
RABBITMQ_URL=amqp://freecad:freecad@rabbitmq:5672/

# Celery configuration
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_EAGER_PROPAGATES=true
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_ACKS_LATE=true
CELERY_TASK_REJECT_ON_WORKER_LOST=true
CELERY_BROKER_POOL_LIMIT=10

# Queue priorities (1-10, higher = more priority)
QUEUE_PRIORITY_URGENT=9
QUEUE_PRIORITY_HIGH=7
QUEUE_PRIORITY_NORMAL=5
QUEUE_PRIORITY_LOW=3
QUEUE_PRIORITY_BACKGROUND=1

# ===================================================================
# AI & MODEL MANAGEMENT
# ===================================================================

# OpenAI API key for development (use test key)
OPENAI_API_KEY=your-openai-api-key-here

# Azure OpenAI (optional)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_API_VERSION=2024-06-01

# Model management
MODEL_POLICY=quality_first
DEFAULT_MODEL=gpt-4o-mini
FALLBACK_MODEL=gpt-4o-mini
ALLOWED_MODELS=gpt-4o-mini,gpt-4o,o1-preview,o1-mini

# ===================================================================
# MONITORING & OBSERVABILITY
# ===================================================================

# OpenTelemetry (optional in dev)
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=freecad-ultra-enterprise-dev

# Sentry (optional in dev)
SENTRY_DSN=

# ===================================================================
# UI & BRANDING
# ===================================================================

# Branding configuration
BRAND_NAME=CNC AI Suite Dev
BRAND_LOGO_PATH=
PDF_MAX_MB=20
PUBLIC_WEB_BASE_URL=http://localhost:3000

# Toolbits configuration
TOOLBITS_ROOT=./data/toolbits

# ===================================================================
# NEXT.JS FRONTEND CONFIGURATION
# ===================================================================

# Node.js environment
NODE_ENV=development

# Frontend API configuration
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_DEV_AUTH_BYPASS=true

# ===================================================================
# ADDITIONAL DEVELOPMENT PORTS
# ===================================================================

# Service ports for development
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
OTEL_COLLECTOR_PORT=4317
OTEL_COLLECTOR_HTTP_PORT=4318
PROMETHEUS_PORT=9090
GRAFANA_PORT=3001

# Grafana admin credentials (DEV ONLY)
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=dev_admin_password

# ===================================================================
# DEVELOPMENT NOTES & WARNINGS
# ===================================================================

# IMPORTANT DEVELOPMENT REMINDERS:
# 1. DEV_MODE=true enables relaxed security - NEVER use in production
# 2. All secret keys use development defaults - MUST change in production
# 3. HTTPS enforcement is disabled - enable in production
# 4. Authentication bypass is enabled - disable in production
# 5. CSRF localhost bypass is enabled - disable in production
# 6. Detailed error messages are enabled - mask in production
# 7. Debug endpoints are enabled - disable in production

# TURKISH COMPLIANCE NOTES:
# - KVKV compliance features are enabled for testing
# - Audit logging is active for development testing
# - PII masking is enabled to test compliance features
# - Data retention settings follow KVKV requirements

# SECURITY TESTING NOTES:
# - Rate limiting is relaxed for development testing
# - Brute force protection has higher thresholds
# - Security headers are partially relaxed for HTTP testing
# - CORS is configured for localhost origins only